<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JS Bin</title>
  		<script src="js/mail-generator.js"></script>
		<link href="stylesheet.css" rel="stylesheet" media="screen">
		<script src="https://code.jquery.com/jquery-2.1.3.min.js" type="text/javascript"></script>
    <script>
        window.onload = function(){

        	//var gameOn = true;
			var container = document.getElementById('main');
			var name = prompt("What is your name?");

        	function gameLoop(){

				/* Rock Paper Fireball Game

				1. User makes a choice
				2. Computer makes a choice
				3. Resolve the outcome and display the winner

				Paper (-1) > Rock (1)
				Rock (1) > Fireball (0)
				Fireball (0) > Paper (-1)

				BONUS
				1. Add HTML and CSS
				2. Add a play again button
				3. Add a score board
				4. Make the computer learn

				*/


				// User makes choice

				function displayChoice(){
				  var choiceCon = document.createElement('div');
				  choiceCon.className = ("choiceCon");
				  choiceCon.innerHTML = (name + ": " + userChoice.toUpperCase());
				  container.appendChild(choiceCon);
				}

				var userChoice, userChoiceUp;

				do{
				  userChoice = prompt("Rock, paper, or fireball?");
				  console.log(userChoice);  
				  var userChoiceUp = userChoice.toUpperCase();
				  console.log(userChoiceUp);  
				} while(userChoiceUp !== "ROCK" && userChoiceUp !== "PAPER" && userChoiceUp !== "FIREBALL");

				if (userChoiceUp == "ROCK"){
				  var x = 1;
				  
				} else if (userChoiceUp == "FIREBALL"){
				  var x = 0;
				  
				} else if (userChoiceUp == "PAPER"){
				  var x = -1;
				      
				} else{
				    var userChoice = prompt("Please choose ROCK, PAPER, or FIREBALL.");
				}
				  
				console.log(x);

				displayChoice();


				// Computer makes a choice

				function displayCompChoice(){
				  var choiceCompCon = document.createElement('div');
				  choiceCompCon.className = ("choiceCompCon");
				  choiceCompCon.innerHTML = ("Computer: " + yText);
				  container.appendChild(choiceCompCon);
				}

				var compChoice = Math.random() * 2 - 1;
				var y = Math.round(compChoice);

				if (y == 1){
				  var yText = "ROCK";
				} else if (y === 0 ){
				  var yText = "FIREBALL";
				} else {
				  var yText = "PAPER";
				}

				console.log(y);
				displayCompChoice();


				// Resolve the outcome and display the winner

				function displayWin(){
				  var winCon = document.createElement('div');
				  winCon.className = ("winCon");
				  winCon.innerHTML = (win);
				  container.appendChild(winCon);
				}

				var resolve = x - y;

				if (resolve == -2 || resolve == 1) {
				  var win = "Nice! You won!";
				  
				} else if (resolve == 2 || resolve == -1) {
				  var win = "Bummer... The computer won.";
				  
				} else {
				  var win = "Tie.";
				}

				displayWin();
			};

			gameLoop();

			// Play again button

			var button = document.createElement("BUTTON");
			button.innerHTML = ("play again");
			container.appendChild(button);
			
	      	$(button).click(gameLoop());	
};
</script>
</head>
<body>
  <div class="container" id="main"></div>
</body>
</html>